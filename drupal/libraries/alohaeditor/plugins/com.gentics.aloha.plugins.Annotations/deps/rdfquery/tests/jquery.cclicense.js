(function(b){function c(a){b("#main").html(a)}function d(){b("#main > *").remove()}function f(a,h){var g,i=a.databank.triples();equals(i.length,h.length,"there should be "+h.length+" triples");for(g=0;g<h.length;g+=1)equals(i[g],h[g])}var e={namespaces:{cc:"http://creativecommons.org/ns#"}};module("Gleaning RDF triples with $.fn.rdf()");test("from an element without a cc:license",function(){c("<p>This is just a paragraph</p>");f(b("#main > p").rdf(),[]);d()});test("from an element with a rel='license'",
function(){c('<p>License: <a href="http://creativecommons.org/licenses/by/2.0/" rel="license">cc by 2.0</a></p>');f(b("#main > p > a").rdf(),[b.rdf.triple("<> a cc:Work",e),b.rdf.triple("<> cc:license <http://creativecommons.org/licenses/by/2.0/>",e),b.rdf.triple("<http://creativecommons.org/licenses/by/2.0/> a cc:License",e)]);d()});test("from an element with a rel='cc:license'",function(){c('<p>License: <a href="http://creativecommons.org/licenses/by/2.0/" rel="cc:license">cc by 2.0</a></p>');f(b("#main > p > a").rdf(),
[b.rdf.triple("<> a cc:Work",e),b.rdf.triple("<> cc:license <http://creativecommons.org/licenses/by/2.0/>",e),b.rdf.triple("<http://creativecommons.org/licenses/by/2.0/> a cc:License",e)]);d()});module("Gleaning RDF triples with $.fn.cclicense()");test("from an element without a cc:license",function(){c("<p>This is just a paragraph</p>");f(b("#main > p").cclicense(),[]);d()});test("from an element with a rel='license'",function(){c('<p>License: <a href="http://creativecommons.org/licenses/by/2.0/" rel="license">cc by 2.0</a></p>');
f(b("#main > p > a").cclicense(),[b.rdf.triple("<> a cc:Work",e),b.rdf.triple("<> cc:license <http://creativecommons.org/licenses/by/2.0/>",e),b.rdf.triple("<http://creativecommons.org/licenses/by/2.0/> a cc:License",e)]);d()});test("from an element with a rel='cc:license'",function(){c('<p>License: <a href="http://creativecommons.org/licenses/by/2.0/" rel="cc:license">cc by 2.0</a></p>');f(b("#main > p > a").cclicense(),[b.rdf.triple("<> a cc:Work",e),b.rdf.triple("<> cc:license <http://creativecommons.org/licenses/by/2.0/>",
e),b.rdf.triple("<http://creativecommons.org/licenses/by/2.0/> a cc:License",e)]);d()});module("Adding license information with $.fn.cclicense()");test("to an element without a href attribute",function(){c("<p>This is just a paragraph</p>");var a=b("#main > p");a.cclicense("http://creativecommons.org/licenses/by/2.0/");equals(a.attr("rel"),undefined,"it shouldn't add anything");d()});test("to an element with a href attribute",function(){c('<p>License: <a href="http://creativecommons.org/licenses/by/2.0/">cc by 2.0</a></p>');
var a=b("#main > p > a");a.cclicense("http://creativecommons.org/licenses/by/2.0/");equals(a.attr("rel"),"license");d()});test("to an element that already has a rel attribute",function(){c('<p>License: <a href="http://creativecommons.org/licenses/by/2.0/" rel="alternate">cc by 2.0</a></p>');var a=b("#main > p > a");a.cclicense("http://creativecommons.org/licenses/by/2.0/");equals(a.attr("rel"),"alternate license");d()});module("Using type() selector");test("from an element without a cc:license using :type",
function(){c("<p>This is just a paragraph</p>");var a=b("#main *:type");equals(a.length,0);d()});test("finding all elements with a rel='license' using :type",function(){c('<p>License: <a href="http://creativecommons.org/licenses/by/2.0/" rel="license">cc by 2.0</a></p>');var a=b("#main *:type");equals(a.length,1);ok(a.is("a"),"it should locate the <a> element");d()});test("finding all elements with a rel='cc:license' using :type",function(){c('<p>License: <a href="http://creativecommons.org/licenses/by/2.0/" rel="cc:license">cc by 2.0</a></p>');
var a=b("#main *:type");equals(a.length,1);ok(a.is("a"),"it should locate the <a> element");d()});test("from an element without a cc:license using type(cc:License)",function(){c("<p>This is just a paragraph</p>");var a=b('#main *:type("cc:License")');equals(a.length,0);d()});test("finding all elements with a rel='license' using type(cc:License)",function(){c('<p>License: <a href="http://creativecommons.org/licenses/by/2.0/" rel="license">cc by 2.0</a></p>');var a=b('#main *:type("cc:License")');equals(a.length,
1);ok(a.is("a"),"it should locate the <a> element");d()});test("finding all elements with a rel='cc:license' using type(cc:License)",function(){c('<p>License: <a href="http://creativecommons.org/licenses/by/2.0/" rel="cc:license">cc by 2.0</a></p>');var a=b('#main *:type("cc:License")');equals(a.length,1);ok(a.is("a"),"it should locate the <a> element");d()});test("from an element without a cc:license using type(cc:Work)",function(){c("<p>This is just a paragraph</p>");var a=b('#main *:type("cc:Work")');
equals(a.length,0);d()});test("finding all elements with a rel='license' using type(cc:Work)",function(){c('<p>License: <a href="http://creativecommons.org/licenses/by/2.0/" rel="license">cc by 2.0</a></p>');var a=b('#main *:type("cc:Work")');equals(a.length,1);ok(a.is("a"),"it should locate the <a> element");d()});test("finding all elements with a rel='cc:license' using type(cc:Work)",function(){c('<p>License: <a href="http://creativecommons.org/licenses/by/2.0/" rel="cc:license">cc by 2.0</a></p>');
var a=b('#main *:type("cc:Work")');equals(a.length,1);ok(a.is("a"),"it should locate the <a> element");d()});module("Using about() selector");test("from an element without a cc:license using :about",function(){c("<p>This is just a paragraph</p>");var a=b("#main *:about");equals(a.length,0);d()});test("finding all elements with a rel='license' using :about",function(){c('<p>License: <a href="http://creativecommons.org/licenses/by/2.0/" rel="license">cc by 2.0</a></p>');var a=b("#main *:about");equals(a.length,
1);ok(a.is("a"),"it should locate the <a> element");d()});test("finding all elements with a rel='cc:license' using :about",function(){c('<p>License: <a href="http://creativecommons.org/licenses/by/2.0/" rel="cc:license">cc by 2.0</a></p>');var a=b("#main *:about");equals(a.length,1);ok(a.is("a"),"it should locate the <a> element");d()})})(jQuery);
