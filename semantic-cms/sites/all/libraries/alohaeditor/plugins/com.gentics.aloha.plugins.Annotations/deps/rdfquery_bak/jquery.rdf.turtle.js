/*
 MIT license (MIT-LICENSE.txt)
 @version 1.0
*/
(function(i){var q=/^(\u0009|\u000A|\u000D|\u0020|#([^\u000A\u000D])*)+/,r=RegExp("^[A-Z_a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd][-A-Z_a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd0-9\u00b7\u0300-\u036f\u203f-\u2040]*"),B=/^(\\u[0-9A-F]{4}|\\U[0-9A-F]{8}|\\\\|\\>|[\u0020-\u003D\u003F-\u005B\u005D-\u10FFFF])*/,
s=/^(true|false)[\s\.;,)\]]/,t=/^(-|\+)?([0-9]+\.[0-9]*[eE](-|\+)?[0-9]+|\.[0-9]+[eE](-|\+)?[0-9]+|[0-9]+[eE](-|\+)?[0-9]+)/,u=/^(-|\+)?(([0-9]+\.[0-9]*)|(\.[0-9]))+/,v=/^(-|\+)?[0-9]+/,C=/^(\\u[0-9A-F]{4}|\\U[0-9A-F]{8}|\\\\|[\u0020-\u0021\u0023-\u005B]|[\u005D-\u10FFFF]|\\t|\\n|\\r|\\")*/,D=/^(\\u[0-9A-F]{4}|\\U[0-9A-F]{8}|\\\\|[\u0020-\u0021\u0023-\u005B]|[\u005D-\u10FFFF]|\\t|\\n|\\r|\\"|\u0009|\u000A|\u000D|"[^"]|""[^"])*/,E=/^[a-z]+(-[a-z0-9]+)*/,w=function(b){return b.replace(/(\\u([0-9A-F]{4}))|(\\U([0-9A-F]{4})([0-9A-F]{4}))/g,
function(f,a,d,c,e,g){return a!==undefined?String.fromCharCode(parseInt(d,16)):String.fromCharCode(parseInt(e,16))+String.fromCharCode(parseInt(g,16))})},k=function(b,f){if(b.substring(0,f.length)===f)return b.substring(f.length);else throw"Invalid Turtle: Expecting '"+f+"', found '"+b.substring(0,20)+"...'";},j=function(b,f){f=f||{};if((f.required||0)&&!q.test(b))throw"Invalid Turtle: Required whitespace is missing!";return b.replace(q,"")},p=function(b,f){var a;b=k(b,"<");a=B.exec(b)[0];b=b.substring(a.length);
b=k(b,">");return{remainder:b,uri:i.uri.resolve(a,f.base)}},n=function(b){var f;if(r.test(b)){f=r.exec(b);return{name:f[0],remainder:b.substring(f[0].length)}}else return{name:"",remainder:b}},x=function(b,f){var a=n(b,f);if(a.name.substring(0,1)==="_")throw"Invalid Turtle: Prefix must not start with an underscore: "+n;else return{prefix:a.name,remainder:a.remainder}},A=function(b,f){var a,d;a=b.substring(0,1);if(a==="_"){b=k(b,"_:");a=n(b,f);return{remainder:a.remainder,blank:i.rdf.blank("_:"+a.name),
triples:[]}}else if(a==="("){d=b;var c,e,g,l;a=i.rdf.nil;d=k(d,"(");d=d=j(d);e=[];c=[];for(g=d.substring(0,1);g!==")";){g=y(d,f);d=g.remainder;e.push(g.object);c=c.concat(g.triples);d=j(d);g=d.substring(0,1)}c={remainder:d,items:e,triples:c};d=c.remainder;e=c.items;g=c.triples;for(c=e.length-1;c>=0;c-=1){l=i.rdf.blank("[]");g.push(i.rdf.triple(l,i.rdf.first,e[c]));g.push(i.rdf.triple(l,i.rdf.rest,a));a=l}d=j(d);d=k(d,")");a={remainder:d,collection:a,triples:g};return{remainder:a.remainder,blank:a.collection,
triples:a.triples}}else if(b.substring(0,2)==="[]")return{remainder:b.substring(2),blank:i.rdf.blank("[]"),triples:[]};else{d=i.rdf.blank("[]");f.subject.unshift(d);b=k(b,"[");b=j(b);a=z(b,f);b=a.remainder;b=j(b);b=k(b,"]");f.subject.shift();return{remainder:b,blank:d,triples:a.triples}}},o=function(b,f){var a,d,c;if(b.substring(0,1)==="<"){a=p(b,f);return{remainder:a.remainder,resource:i.rdf.resource(a.uri,f.base)}}else{try{a=x(b,f);d=a.prefix;b=a.remainder}catch(e){d=""}b=k(b,":");a=n(b,f);c=a.name;
return{remainder:a.remainder,resource:i.rdf.resource(d+":"+c,{namespaces:f.namespaces,base:f.base})}}},F=function(b,f){var a,d;if(s.test(b)){d=s.exec(b)[1];return{remainder:b.substring(d.length),literal:i.rdf.literal(d,{datatype:"http://www.w3.org/2001/XMLSchema#boolean"})}}else if(t.test(b)){d=t.exec(b)[0];return{remainder:b.substring(d.length),literal:i.rdf.literal(d,{datatype:"http://www.w3.org/2001/XMLSchema#double"})}}else if(u.test(b)){d=u.exec(b)[0];return{remainder:b.substring(d.length),literal:i.rdf.literal(d,
{datatype:"http://www.w3.org/2001/XMLSchema#decimal"})}}else if(v.test(b)){d=v.exec(b)[0];return{remainder:b.substring(d.length),literal:i.rdf.literal(d,{datatype:"http://www.w3.org/2001/XMLSchema#integer"})}}else{d=b;if(d.substring(0,3)==='"""'){d=k(d,'"""');a=D.exec(d)[0];d=d.substring(a.length);a=a.replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\\"/g,'"');a=w(a);d=k(d,'"""')}else{d=k(d,'"');a=C.exec(d)[0];d=d.substring(a.length);a=a.replace(/\\"/g,'"');a=w(a);d=k(d,'"')}parsed=
{remainder:d,string:a};b=parsed.remainder;d=parsed.string;b=j(b);a=b.substring(0,1);if(a==="^"){b=k(b,"^^");b=j(b);parsed=o(b,f);return{remainder:parsed.remainder,literal:i.rdf.literal(d,{datatype:parsed.resource.value})}}else if(a==="@"){b=k(b,"@");a=b=j(b);var c;c=E.exec(a)[0];parsed={remainder:a.substring(c.length),language:c};return{remainder:parsed.remainder,literal:i.rdf.literal(d,{lang:parsed.language})}}else return{remainder:b,literal:i.rdf.literal('"'+d.replace(/"/g,'\\"')+'"')}}},y=function(b,
f){var a,d=b.substring(0,1);if(d==="["||d==="_"||d==="("){a=A(b,f);return{remainder:a.remainder,object:a.blank,triples:a.triples}}else try{a=F(b,f);return{remainder:a.remainder,object:a.literal,triples:[]}}catch(c){a=o(b,f);return{remainder:a.remainder,object:a.resource,triples:[]}}},z=function(b,f){var a,d=[],c=b.substring(0,1);do{c=b;var e=f,g=void 0,l=c.substring(0,1);try{g=o(c,e);a={remainder:g.remainder,verb:g.resource}}catch(m){if(l==="a"){c=j(c.substring(1),{required:true});a={remainder:c,
verb:i.rdf.type}}else throw m;}b=a.remainder;a=a.verb;b=j(b);f.verb.unshift(a);a=b;c=f;g=void 0;g=void 0;e=[];g=a.substring(0,1);do{g=y(a,c);a=g.remainder;e=e.concat(g.triples);g=i.rdf.triple(c.subject[0],c.verb[0],g.object);e.push(g);a=j(a);g=a.substring(0,1);if(g===","){a=k(a,",");a=j(a);g=a.substring(0,1)}else break}while(g!=="]"&&g!==";"&&g!==".");a={remainder:a,triples:e};b=a.remainder;d=d.concat(a.triples);f.verb.shift();b=j(b);c=b.substring(0,1);if(c===";"){b=k(b,";");b=j(b);c=b.substring(0,
1)}else break}while(c!=="]"&&c!==".");return{remainder:b,triples:d}};i.rdf.parsers["text/turtle"]={parse:function(b){return b},serialize:function(b){return b},triples:function(b,f){var a={},d=[];f=f||{};f.namespaces={};f.base=f.base||i.uri.base();f.subject=[];for(f.verb=[];b!=="";){var c=b;a=f;var e=void 0;c=j(c);if(c.length===0)a={remainder:"",opts:a,triples:[]};else{e=c.substring(0,1);if(e==="@"){c=c;a=a;e=void 0;var g=void 0;if(c.substring(0,7)==="@prefix"){c=c.substring(7);c=j(c,{required:true});
e=x(c,a);g=e.prefix;c=e.remainder;c=j(c);c=k(c,":");c=j(c);e=p(c,a);a.namespaces[g]=e.uri;c=e.remainder}else if(c.substring(0,5)==="@base"){c=k(c,"@base");c=j(c,{required:true});e=p(c,a);a.base=e.uri;c=e.remainder}else throw"Invalid Turtle: Unrecognised directive: "+c;c=j(c);c=k(c,".");a={remainder:c,opts:a,triples:[]}}else{c=c;a=a;e=void 0;g=[];c=c;e=void 0;e=c.substring(0,1);if(e==="["||e==="_"||e==="("){e=A(c,a);e={remainder:e.remainder,subject:e.blank,triples:e.triples}}else{e=o(c,a);e={remainder:e.remainder,
subject:e.resource,triples:[]}}c=e.remainder;a.subject.unshift(e.subject);g=e.triples;c=j(c);e=z(c,a);a.subject.shift();c=j(e.remainder);c=k(c,".");a={remainder:c,opts:a,triples:g.concat(e.triples)}}a=a}b=a.remainder;f=a.opts;d=d.concat(a.triples)}return d},dump:function(b,f){var a=i.rdf.parsers["application/json"].dump(b),d=f.namespaces||{},c=f.indent||false,e,g,l,m,h="";for(e in d){h+="@prefix "+e+": <"+d[e]+"> . ";if(c)h+="\n"}for(g in a){if(c)h+="\n";if(g.substring(0,2)==="_:")h+=g;else try{h+=
i.createCurie(g,{namespaces:d})}catch(G){h+="<"+g+">"}h+=" ";for(l in a[g]){if(c)h+="\n  ";if(l===i.rdf.type.value.toString())h+="a";else try{h+=i.createCurie(l,{namespaces:d})}catch(H){h+="<"+l+">"}h+=" ";for(m=0;m<a[g][l].length;m+=1){if(m>0&&c)h+="\n    ";e=a[g][l][m];if(e.type==="uri")try{h+=i.createCurie(e.value,{namespaces:d})}catch(I){h+="<"+e.value+">"}else if(e.type==="bnode")h+=e.value;else{h+='"'+e.value+'"';if(e.lang)h+="@"+e.lang;if(e.datatype){h+="^^";try{h+=i.createCurie(e.datatype,
{namespaces:d})}catch(J){h+="<"+e.datatype+">"}}}h+=" , "}h=h.substring(0,h.length-3);h+=" ; "}h=h.substring(0,h.length-3);h+=" . ";if(c)h+="\n"}return h}}})(jQuery);
