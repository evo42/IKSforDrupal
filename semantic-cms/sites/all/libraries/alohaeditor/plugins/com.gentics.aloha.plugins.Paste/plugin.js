GENTICS.Aloha.PastePlugin=new GENTICS.Aloha.Plugin("com.gentics.aloha.plugins.Paste");GENTICS.Aloha.PastePlugin.pasteHandlers=[];
GENTICS.Aloha.PastePlugin.init=function(){var a=this;this.pasteDiv=jQuery('<div style="position:absolute; top:-100000px; left:-100000px"></div>');this.pasteDiv.attr("contentEditable","true");jQuery("body").append(this.pasteDiv);GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha,"editableCreated",function(b,c){jQuery.browser.msie?c.obj.bind("beforepaste",function(d){a.redirectPaste();d.stopPropagation()}):c.obj.bind("paste",function(d){a.redirectPaste();window.setTimeout(function(){a.getPastedContent(d)},
10);d.stopPropagation()})});jQuery.browser.msie&&this.pasteDiv.bind("paste",function(b){window.setTimeout(function(){a.getPastedContent(b)},10)})};
GENTICS.Aloha.PastePlugin.redirectPaste=function(){this.currentRange=new GENTICS.Utils.RangeObject(true);this.currentEditable=GENTICS.Aloha.activeEditable;var a=jQuery(window);this.scrollTop=a.scrollTop();this.scrollLeft=a.scrollLeft();this.height=jQuery(document).height();this.pasteDiv.text("");this.currentEditable&&this.currentEditable.obj.blur();GENTICS.Utils.Dom.setCursorInto(this.pasteDiv.get(0));this.pasteDiv.focus()};
GENTICS.Aloha.PastePlugin.getPastedContent=function(a){for(var b=0;b<this.pasteHandlers.length;++b)this.pasteHandlers[b].handlePaste(this.pasteDiv);if(this.currentRange&&this.currentEditable){var c=this.pasteDiv.contents();for(b=c.length-1;b>=0;--b)this.pasteElement(c.get(b));this.currentEditable.obj.focus();c.length>0?GENTICS.Utils.Dom.setCursorAfter(c.get(c.length-1)):this.currentRange.select();if(this.scrollTop!==false&&this.scrollLeft!==false&&this.height!==false){b=jQuery(window);c=jQuery(document).height()-
this.height;b.scrollTop(this.scrollTop+c);b.scrollLeft(this.scrollLeft)}}this.height=this.scollLeft=this.scrollTop=this.currentEditable=this.currentRange=false;GENTICS.Aloha.activeEditable.smartContentChange(a);this.pasteDiv.text("")};
GENTICS.Aloha.PastePlugin.pasteElement=function(a){var b=jQuery(a);if(!GENTICS.Utils.Dom.insertIntoDOM(b,this.currentRange,this.currentEditable.obj,false)){b=b.contents();if(GENTICS.Utils.Dom.isBlockLevelElement(a)||GENTICS.Utils.Dom.isListElement(a))this.pasteElement(jQuery("<br/>").get(0));for(a=b.length-1;a>=0;--a)this.pasteElement(b[a])}};GENTICS.Aloha.PastePlugin.register=function(a){this.pasteHandlers.push(a)};GENTICS.Aloha.PastePlugin.PasteHandler=function(){GENTICS.Aloha.PastePlugin.register(this)};
GENTICS.Aloha.PastePlugin.PasteHandler.prototype.handlePaste=function(){};
